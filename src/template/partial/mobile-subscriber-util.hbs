<style>
.modal {
  position: fixed;
  background-color: rgba(0, 0, 0, 0.5);
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 999;
  pointer-events: all;
  -webkit-transition: all 0.3s;
  -moz-transition: all 0.3s;
  transition: all 0.3s;
}
.modal > div {
  position: absolute;
  top: 50%;
  left: 30%;
  transform: translate(-20%, -50%);
  padding: 2.5em 2em 2em 2em;
  background: #ffffff;
  color: #333333;
}
.modal-close {
  color: #000;
  line-height: 40px;
  font-size: 80%;
  position: absolute;
  right: 0;
  text-align: center;
  top: 0;
  width: 60px;
}
</style>
<script>
  (function (red5prosdk) {
    /**
      * https://developers.google.com/web/updates/2017/09/autoplay-policy-changes
      * https://webkit.org/blog/6784/new-video-policies-for-ios/
    */
    var fn = window.exposeSubscriberGlobally;
    function showModal (content) {
      var div = document.createElement('div');
      div.classList.add('modal');
      var container = document.createElement('div');
      var button = document.createElement('a');
      var close = document.createTextNode('close');
      button.href = "#";
      button.appendChild(close);
      button.classList.add('modal-close');
      container.appendChild(button);
      container.appendChild(content);
      div.appendChild(container);
      document.body.appendChild(div);
      button.addEventListener('click', function () {
        document.body.removeChild(div);
      });
    }
    function generateLine (text) {
      var p = document.createElement('p');
      var t = document.createTextNode(text);
      p.appendChild(t);
      return p;
    }
    function generateInfoLink () {
      var p = document.createElement('p');
      var a1 = document.createElement('a');
      a1.target = '_blank';
      a1.href = 'https://developers.google.com/web/updates/2017/09/autoplay-policy-changes';
      var a1t = document.createTextNode('More Info');
      a1.appendChild(a1t);
      p.appendChild(a1);
      return p;
    }
    window.exposeSubscriberGlobally = function (subscriber) {
      if (fn) {
        fn.call(window, subscriber);
      }
      subscriber.on(red5prosdk.SubscriberEventTypes.AUTO_PLAYBACK_FAILURE, function () {
        var content = document.createElement('div');
        content.appendChild(generateLine('Auto playback failed.'));
        content.appendChild(document.createElement('br'));
        content.appendChild(generateLine('Close this modal and click the play button.'));
        content.appendChild(document.createElement('br'));
        content.appendChild(generateInfoLink());
        showModal(content);
      });
      subscriber.on(red5prosdk.SubscriberEventTypes.AUTO_PLAYBACK_MUTED, function () {
        var content = document.createElement('div');
        content.appendChild(generateLine('Auto playback muted.'));
        content.appendChild(document.createElement('br'));
        content.appendChild(generateLine('Close this modal and click the mute button for audio.'));
        content.appendChild(document.createElement('br'));
        content.appendChild(generateInfoLink());
        showModal(content);
      });
    }
  })(window.red5prosdk);
</script>
